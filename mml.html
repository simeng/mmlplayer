<!doctype html>
<head>
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <!-- polyfill -->
    <script src="MIDI.js/inc/shim/Base64.js" type="text/javascript"></script>
    <script src="MIDI.js/inc/shim/Base64binary.js" type="text/javascript"></script>
    <script src="MIDI.js/inc/shim/WebAudioAPI.js" type="text/javascript"></script>
    <!-- midi.js package -->
    <script src="MIDI.js/js/midi/audioDetect.js" type="text/javascript"></script>
    <script src="MIDI.js/js/midi/gm.js" type="text/javascript"></script>
    <script src="MIDI.js/js/midi/loader.js" type="text/javascript"></script>
    <script src="MIDI.js/js/midi/plugin.audiotag.js" type="text/javascript"></script>
    <script src="MIDI.js/js/midi/plugin.webaudio.js" type="text/javascript"></script>
    <script src="MIDI.js/js/midi/plugin.webmidi.js" type="text/javascript"></script>
    <!-- utils -->
    <script src="MIDI.js/js/util/dom_request_xhr.js" type="text/javascript"></script>
    <script src="MIDI.js/js/util/dom_request_script.js" type="text/javascript"></script>
    <script src="mml.js" type="text/javascript"></script>
</head>
<body>
    <div>
        <select id="change-instrument">
            <option name="">Select instrument</option>
            <option name="accordion">accordion</option>
            <option name="acoustic_bass">acoustic_bass</option>
            <option name="acoustic_grand_piano">acoustic_grand_piano</option>
            <option name="acoustic_guitar_nylon">acoustic_guitar_nylon</option>
            <option name="acoustic_guitar_steel">acoustic_guitar_steel</option>
            <option name="agogo">agogo</option>
            <option name="alto_sax">alto_sax</option>
            <option name="applause">applause</option>
            <option name="bagpipe">bagpipe</option>
            <option name="banjo">banjo</option>
            <option name="baritone_sax">baritone_sax</option>
            <option name="bassoon">bassoon</option>
            <option name="bird_tweet">bird_tweet</option>
            <option name="blown_bottle">blown_bottle</option>
            <option name="brass_section">brass_section</option>
            <option name="breath_noise">breath_noise</option>
            <option name="bright_acoustic_piano">bright_acoustic_piano</option>
            <option name="celesta">celesta</option>
            <option name="cello">cello</option>
            <option name="choir_aahs">choir_aahs</option>
            <option name="church_organ">church_organ</option>
            <option name="clarinet">clarinet</option>
            <option name="clavinet">clavinet</option>
            <option name="contrabass">contrabass</option>
            <option name="distortion_guitar">distortion_guitar</option>
            <option name="drawbar_organ">drawbar_organ</option>
            <option name="dulcimer">dulcimer</option>
            <option name="electric_bass_finger">electric_bass_finger</option>
            <option name="electric_bass_pick">electric_bass_pick</option>
            <option name="electric_grand_piano">electric_grand_piano</option>
            <option name="electric_guitar_clean">electric_guitar_clean</option>
            <option name="electric_guitar_jazz">electric_guitar_jazz</option>
            <option name="electric_guitar_muted">electric_guitar_muted</option>
            <option name="electric_piano_1">electric_piano_1</option>
            <option name="electric_piano_2">electric_piano_2</option>
            <option name="english_horn">english_horn</option>
            <option name="fiddle">fiddle</option>
            <option name="flute">flute</option>
            <option name="french_horn">french_horn</option>
            <option name="fretless_bass">fretless_bass</option>
            <option name="fx_1_rain">fx_1_rain</option>
            <option name="fx_2_soundtrack">fx_2_soundtrack</option>
            <option name="fx_3_crystal">fx_3_crystal</option>
            <option name="fx_4_atmosphere">fx_4_atmosphere</option>
            <option name="fx_5_brightness">fx_5_brightness</option>
            <option name="fx_6_goblins">fx_6_goblins</option>
            <option name="fx_7_echoes">fx_7_echoes</option>
            <option name="fx_8_scifi">fx_8_scifi</option>
            <option name="glockenspiel">glockenspiel</option>
            <option name="guitar_fret_noise">guitar_fret_noise</option>
            <option name="guitar_harmonics">guitar_harmonics</option>
            <option name="gunshot">gunshot</option>
            <option name="harmonica">harmonica</option>
            <option name="harpsichord">harpsichord</option>
            <option name="helicopter">helicopter</option>
            <option name="honkytonk_piano">honkytonk_piano</option>
            <option name="kalimba">kalimba</option>
            <option name="koto">koto</option>
            <option name="lead_1_square">lead_1_square</option>
            <option name="lead_2_sawtooth">lead_2_sawtooth</option>
            <option name="lead_3_calliope">lead_3_calliope</option>
            <option name="lead_4_chiff">lead_4_chiff</option>
            <option name="lead_5_charang">lead_5_charang</option>
            <option name="lead_6_voice">lead_6_voice</option>
            <option name="lead_7_fifths">lead_7_fifths</option>
            <option name="lead_8_bass__lead">lead_8_bass__lead</option>
            <option name="marimba">marimba</option>
            <option name="melodic_tom">melodic_tom</option>
            <option name="music_box">music_box</option>
            <option name="muted_trumpet">muted_trumpet</option>
            <option name="oboe">oboe</option>
            <option name="ocarina">ocarina</option>
            <option name="orchestra_hit">orchestra_hit</option>
            <option name="orchestral_harp">orchestral_harp</option>
            <option name="overdriven_guitar">overdriven_guitar</option>
            <option name="pad_1_new_age">pad_1_new_age</option>
            <option name="pad_2_warm">pad_2_warm</option>
            <option name="pad_3_polysynth">pad_3_polysynth</option>
            <option name="pad_4_choir">pad_4_choir</option>
            <option name="pad_5_bowed">pad_5_bowed</option>
            <option name="pad_6_metallic">pad_6_metallic</option>
            <option name="pad_7_halo">pad_7_halo</option>
            <option name="pad_8_sweep">pad_8_sweep</option>
            <option name="pan_flute">pan_flute</option>
            <option name="percussive_organ">percussive_organ</option>
            <option name="piccolo">piccolo</option>
            <option name="pizzicato_strings">pizzicato_strings</option>
            <option name="recorder">recorder</option>
            <option name="reed_organ">reed_organ</option>
            <option name="reverse_cymbal">reverse_cymbal</option>
            <option name="rock_organ">rock_organ</option>
            <option name="seashore">seashore</option>
            <option name="shakuhachi">shakuhachi</option>
            <option name="shamisen">shamisen</option>
            <option name="shanai">shanai</option>
            <option name="sitar">sitar</option>
            <option name="slap_bass_1">slap_bass_1</option>
            <option name="slap_bass_2">slap_bass_2</option>
            <option name="soprano_sax">soprano_sax</option>
            <option name="steel_drums">steel_drums</option>
            <option name="string_ensemble_1">string_ensemble_1</option>
            <option name="string_ensemble_2">string_ensemble_2</option>
            <option name="synth_bass_1">synth_bass_1</option>
            <option name="synth_bass_2">synth_bass_2</option>
            <option name="synth_brass_1">synth_brass_1</option>
            <option name="synth_brass_2">synth_brass_2</option>
            <option name="synth_choir">synth_choir</option>
            <option name="synth_drum">synth_drum</option>
            <option name="synth_strings_1">synth_strings_1</option>
            <option name="synth_strings_2">synth_strings_2</option>
            <option name="taiko_drum">taiko_drum</option>
            <option name="tango_accordion">tango_accordion</option>
            <option name="telephone_ring">telephone_ring</option>
            <option name="tenor_sax">tenor_sax</option>
            <option name="timpani">timpani</option>
            <option name="tinkle_bell">tinkle_bell</option>
            <option name="tremolo_strings">tremolo_strings</option>
            <option name="trombone">trombone</option>
            <option name="trumpet">trumpet</option>
            <option name="tuba">tuba</option>
            <option name="tubular_bells">tubular_bells</option>
            <option name="vibraphone">vibraphone</option>
            <option name="viola">viola</option>
            <option name="violin">violin</option>
            <option name="voice_oohs">voice_oohs</option>
            <option name="whistle">whistle</option>
            <option name="woodblock">woodblock</option>
            <option name="xylophone">xylophone</option>
        </select>
        <br />
        <textarea cols="40" rows="20" id="mml-data" placeholder="v127cdefgab">t180o6v127
fa&gt;c&lt;afa8&gt;c&amp;c8&lt;a
dfafdf8a&amp;a8d
cegece8g&amp;g8e
cc8c&amp;c8c8c8
c8cccc8
fa&gt;c&lt;afa8&gt;c&amp;c8&lt;a
dfafdf8a&amp;a8d
cegece8g&amp;g8e
c1&amp;c1,
o4l1frdrcrcrfrdrcrcr
        </textarea><br>
        <button id="play-mml" disabled>Play</button>
    </div>

    <div>
        <ul>
            <li>t = tempo (default 100)</li>
            <li>o = octave (default o5)</li>
            <li>v = volume</li>
            <li>l = change default note length (default 4)</li>
            <li>r = rest note</li>
            <ul>
                <li>1, 2, 4, 8, 16 = note length</li>
                <li>. = dotted (150%)</li>
            </ul>
            <li>cdefgab = note (can append half note / length modifiers)</li>
            <ul>
                <li>+ = half note up (#)</li>
                <li>- = half note down (b)</li>
                <li>1, 2, 4, 8, 16 = note length</li>
                <li>. = dotted (150%)</li>
            </ul>
            <li>&gt; = 1 octave up</li>
            <li>&lt; = 1 octave down</li>
            <li>, = start next track (plays simultaneously)</li>
            <li>&amp; = combine with next note</li>
        </ul>
    </div>

<script type="text/javascript">

    var mml = new MML();

    window.onload = function () {
        mml.loadInstrument("acoustic_grand_piano", function() {
            document.querySelector("#play-mml").removeAttribute("disabled");
        });
        document.querySelector("#play-mml").onclick = function () {
            var mmlData = document.querySelector("#mml-data");
            mml.parse(mmlData.value);
        };
        document.querySelector("#change-instrument").onchange = function () {
            document.querySelector("#play-mml").setAttribute("disabled", "disabled");
            mml.loadInstrument(this.value, function() {
                document.querySelector("#play-mml").removeAttribute("disabled");
            });
        };
    }

</script>
</body>
